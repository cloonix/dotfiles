#!/bin/zsh
# Install and configure Yazi
# This script reruns when yazi config changes
# hash: {{ include "dot_config/yazi/init.lua" | sha256sum }}

{{- template "helpers.sh" . }}

if ! command -v yazi >/dev/null 2>&1; then
    warn "yazi not found, skipping"
    exit 0
fi

if ! command -v ya >/dev/null 2>&1; then
    warn "ya (yazi package manager) not found, skipping"
    exit 0
fi

progress "Yazi"

if ya pkg install >/dev/null 2>&1; then
    yazi --clear-cache >/dev/null 2>&1 || true
    finish
else
    failed
    exit 1
fi
