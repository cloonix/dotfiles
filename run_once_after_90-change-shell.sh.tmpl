#!/bin/zsh
# Change default shell to zsh

{{- template "helpers.sh" . }}

if ! command -v zsh >/dev/null 2>&1; then
    warn "zsh not found, skipping"
    exit 0
fi

zsh_path=$(command -v zsh)
current_shell="$SHELL"

if [[ "$current_shell" == "$zsh_path" ]]; then
    success "Shell is already zsh"
    exit 0
fi

progress "Shell"

if chsh -s "$zsh_path" >/dev/null 2>&1; then
    finish
    success "Shell changed. Log out and back in for changes to take effect."
else
    finish
    warn "Could not change shell automatically. Try manually: chsh -s $zsh_path"
    exit 0
fi
