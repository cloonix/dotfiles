{{ if or (lookPath "brew") (lookPath "opencode") -}}
#!/usr/bin/env bash
{{ template "helpers.sh" . }}

section "Upgrades"

{{ if lookPath "brew" -}}
progress "Homebrew update"
if brew update >/dev/null 2>&1; then
    finish
else
    failed
    exit 1
fi

progress "Homebrew upgrade"
if brew upgrade >/dev/null 2>&1; then
    finish
else
    failed
    exit 1
fi
{{ end -}}

{{ if lookPath "opencode" -}}
progress "OpenCode"
if opencode upgrade >/dev/null 2>&1; then
    finish
else
    warn "OpenCode upgrade failed or skipped"
fi
{{ end -}}
{{ end -}}
