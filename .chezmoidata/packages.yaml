# Custom installers - curl-based install scripts
# Metadata fields:
#   check: Command to check if installed
#   url: Install script URL
#   install_when: "missing" (only if not installed) or "always" (run every time)
#   requires: List of command dependencies (must exist before running)
custom:
  homebrew:
    check: "brew"
    url: "https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh"
    install_when: "missing"
    requires: []
  opencode:
    check: "opencode"
    url: "https://opencode.ai/install"
    install_when: "always"
    requires: ["brew"]
  protonpass:
    check: "pass-cli"
    url: "https://proton.me/download/pass-cli/install.sh"
    install_when: "always"
    requires: ["brew"]
  servicehub:
    check: "crawl"
    url: "https://raw.githubusercontent.com/cloonix/service-hub/main/install.sh"
    install_when: "always"
    requires: ["brew", "pipx"]
  pkmdex:
    check: "pkm"
    url: "https://raw.githubusercontent.com/cloonix/pkmdex/main/install.sh"
    install_when: "always"
    requires: ["brew", "pipx"]

# Package installation combines basic + profile:
# - Combinations: basic+dev (Linux) OR basic+mac (macOS)
# - Dev and mac are PARALLEL platforms, not hierarchical
# - Shared packages between dev/mac are intentional (both need dev tools)
# - Only basic packages should NOT be duplicated in dev/mac
packages:
  # Minimal essentials - installed on ALL machines (Linux + macOS)
  basic:
    custom:
      - "homebrew"
    taps: []
    apt:
      - "bat"
      - "eza"
      - "git"
      - "curl"
      - "rsync"
      - "zsh"
      - "zoxide"
    brews:
      - "fastfetch"
      - "fzf"
      - "fd"
      - "neovim"
      - "starship"
      - "zellij"
    casks: []

  # Linux/WSL2 development tools (added to basic)
  dev:
    custom:
      - "opencode"
      - "servicehub"
    taps: []
    apt:
      - "btop"
      - "build-essential"
      - "keychain"
      - "tokei"
      - "jq"
      - "nmap"
    brews:
      - "bat"
      - "dstask"
      - "eza"
      - "fabric-ai"
      - "fd"
      - "fzf"
      - "gh"
      - "glow"
      - "go"
      - "lazygit"
      - "ncdu"
      - "pipx"
      - "uv"
      - "yazi"
      - "zoxide"
    casks: []

  # macOS development tools and GUI apps (added to basic)
  # Note: Overlaps with dev are intentional (different platforms, same needs)
  mac:
    custom:
      - "opencode"
      - "protonpass"
      - "servicehub"
      - "pkmdex"
    taps: []
    brews:
      - "ansible"
      - "bat"
      - "btop"
      - "dstask"
      - "eza"
      - "fabric-ai"
      - "fd"
      - "fzf"
      - "glow"
      - "go"
      - "gopass"
      - "hcloud"
      - "hugo"
      - "lazygit"
      - "logrotate"
      - "mole"
      - "ncdu"
      - "nmap"
      - "sevenzip"
      - "syncthing"
      - "yazi"
      - "zoxide"
      - "uv"
    casks:
      - "claude-code"
      - "copilot-cli"
      - "mountain-duck"
      - "typora"
